(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-518a0f4c"],{1511:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper p-4 pb-12 rounded-t-lg relative"},[e.userEmail?e._e():s("div",[s("button",{staticClass:"text-xl p-2 ml-2 mb-2 mr-8",class:e.isSignIn&&" bg-gray-800 text-white",on:{click:function(t){e.isSignIn=!0}}},[e._v("Sign In")]),s("button",{staticClass:"text-xl p-2 ml-2 mb-2 mr-8",class:!e.isSignIn&&" bg-gray-800 text-white",on:{click:function(t){e.isSignIn=!1}}},[e._v("Sign Up")]),s("form",{on:{submit:function(t){t.preventDefault(),e.isSignIn?e.signIn():e.signUp()}}},[s("label",{staticClass:"block p-4 shadow-md border border-gray-400 mb-4"},[e._v(" Email "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"w-full p-2 border border-gray-300",attrs:{type:"text"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),s("label",{staticClass:"block p-4 shadow-md border border-gray-400 mb-4"},[e._v(" Password "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"w-full p-2 border border-gray-300",attrs:{type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),s("button",{staticClass:"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2",attrs:{type:"submit"}},[e._v(" "+e._s(e.isSignIn?"Sign In":"Sign Up")+" ")])])]),e.userEmail?s("div",[s("p",{staticClass:"text-2xl"},[e._v(e._s(e.userEmail)+" is logged in")]),s("button",{staticClass:"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2",attrs:{type:"button"},on:{click:e.signOut}},[e._v(" Sign Out ")]),s("p",[e._v("Your household: "+e._s(e.houseName))]),s("button",{staticClass:"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2",attrs:{type:"button"},on:{click:e.createHouse}},[e._v(" Create Household ")]),s("h2",[e._v("Invite a user to your household")]),s("label",{staticClass:"block p-4 shadow-md border border-gray-400 mb-4"},[e._v(" Email Address "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.inviteeEmail,expression:"inviteeEmail"}],staticClass:"w-full p-2 border border-gray-300",attrs:{type:"text"},domProps:{value:e.inviteeEmail},on:{input:function(t){t.target.composing||(e.inviteeEmail=t.target.value)}}})]),s("button",{staticClass:"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2",attrs:{type:"button"},on:{click:e.inviteUser}},[e._v(" Invite User ")])]):e._e()])},a=[],i=(s("4160"),s("b0c0"),s("159b"),s("5530")),n=s("59ca"),r=s("2f62"),l=s("dc59"),u={name:"User",data:function(){return{isSignIn:!0,email:"",password:"",houseName:"",inviteeEmail:"",userEmail:l["a"].currentUser?l["a"].currentUser.email:null}},computed:Object(i["a"])({},Object(r["c"])(["userProfile"])),created:function(){var e=this;l["a"].currentUser&&(console.log(l["a"].currentUser.uid),l["d"].doc(l["a"].currentUser.uid).get().then((function(t){if(console.log(t),t.exists){console.log(t.data());var s=t.data().household;console.log(s),l["b"].collection("households").doc(s).get().then((function(t){t.exists&&(e.houseName=t.data().name,console.log(e.houseName))}))}})))},methods:{signUp:function(){var e=this;console.log("signup"),l["a"].createUserWithEmailAndPassword(this.email,this.password).then((function(t){var s=t.user;e.email="",e.password="",console.log(s.uid,s.email)})).catch((function(e){alert(e.message)}))},signIn:function(){this.$store.dispatch("login",{email:this.email,password:this.password})},signOut:function(){var e=this;l["a"].signOut().then((function(){e.userEmail=null})).catch((function(e){return alert(e.message)}))},createHouse:function(){l["b"].collection("households").add({users:[l["a"].currentUser.uid]}).then((function(e){l["d"].doc(l["a"].currentUser.uid).set({households:e.id},{merge:!0})}))},inviteUser:function(){var e=this;l["d"].where("email","==",this.inviteeEmail).get().then((function(t){t.forEach((function(t){var s=t.id;l["d"].doc(s).update({household:e.userProfile.household}),l["c"].doc(e.userProfile.household).update({users:n["firestore"].FieldValue.arrayUnion(s)}).then((function(){e.inviteeEmail=""}))}))})).catch((function(e){console.log(e)}))}}},c=u,d=(s("38fb"),s("2877")),m=Object(d["a"])(c,o,a,!1,null,"9a62c3ea",null);t["default"]=m.exports},"38fb":function(e,t,s){"use strict";var o=s("eb14"),a=s.n(o);a.a},eb14:function(e,t,s){}}]);
//# sourceMappingURL=chunk-518a0f4c.a386b0ff.js.map