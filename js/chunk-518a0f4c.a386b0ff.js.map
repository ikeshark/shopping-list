{"version":3,"sources":["webpack:///./src/views/User.vue?c626","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?6a5a","webpack:///./src/views/User.vue?9c1b","webpack:///./src/views/User.vue?c55f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","userEmail","_e","class","isSignIn","on","$event","_v","preventDefault","signIn","signUp","directives","name","rawName","value","expression","attrs","domProps","target","composing","email","password","_s","signOut","houseName","createHouse","inviteeEmail","inviteUser","staticRenderFns","data","computed","created","console","log","doc","exists","household","myHouse","methods","user","uid","alert","err","message","$store","dispatch","households","docRef","id","component"],"mappings":"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","file":"js/chunk-518a0f4c.a386b0ff.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper p-4 pb-12 rounded-t-lg relative\"},[(!_vm.userEmail)?_c('div',[_c('button',{staticClass:\"text-xl p-2 ml-2 mb-2 mr-8\",class:_vm.isSignIn && ' bg-gray-800 text-white',on:{\"click\":function($event){_vm.isSignIn = true}}},[_vm._v(\"Sign In\")]),_c('button',{staticClass:\"text-xl p-2 ml-2 mb-2 mr-8\",class:!_vm.isSignIn && ' bg-gray-800 text-white',on:{\"click\":function($event){_vm.isSignIn = false}}},[_vm._v(\"Sign Up\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.isSignIn ? _vm.signIn() : _vm.signUp()}}},[_c('label',{staticClass:\"block p-4 shadow-md border border-gray-400 mb-4\"},[_vm._v(\" Email \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"w-full p-2 border border-gray-300\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_c('label',{staticClass:\"block p-4 shadow-md border border-gray-400 mb-4\"},[_vm._v(\" Password \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"w-full p-2 border border-gray-300\",attrs:{\"type\":\"password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})]),_c('button',{staticClass:\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\",attrs:{\"type\":\"submit\"}},[_vm._v(\" \"+_vm._s(_vm.isSignIn ? 'Sign In' : 'Sign Up')+\" \")])])]):_vm._e(),(_vm.userEmail)?_c('div',[_c('p',{staticClass:\"text-2xl\"},[_vm._v(_vm._s(_vm.userEmail)+\" is logged in\")]),_c('button',{staticClass:\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.signOut}},[_vm._v(\" Sign Out \")]),_c('p',[_vm._v(\"Your household: \"+_vm._s(_vm.houseName))]),_c('button',{staticClass:\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.createHouse}},[_vm._v(\" Create Household \")]),_c('h2',[_vm._v(\"Invite a user to your household\")]),_c('label',{staticClass:\"block p-4 shadow-md border border-gray-400 mb-4\"},[_vm._v(\" Email Address \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.inviteeEmail),expression:\"inviteeEmail\"}],staticClass:\"w-full p-2 border border-gray-300\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.inviteeEmail)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.inviteeEmail=$event.target.value}}})]),_c('button',{staticClass:\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.inviteUser}},[_vm._v(\" Invite User \")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"wrapper p-4 pb-12 rounded-t-lg relative\">\n    <div v-if=\"!userEmail\">\n      <button\n        class=\"text-xl p-2 ml-2 mb-2 mr-8\"\n        :class=\"isSignIn && ' bg-gray-800 text-white'\"\n        @click=\"isSignIn = true\">Sign In</button>\n      <button\n        class=\"text-xl p-2 ml-2 mb-2 mr-8\"\n        :class=\"!isSignIn && ' bg-gray-800 text-white'\"\n          @click=\"isSignIn = false\">Sign Up</button>\n\n      <form v-on:submit.prevent=\"isSignIn ? signIn() : signUp()\">\n        <label class=\"block p-4 shadow-md border border-gray-400 mb-4\">\n          Email\n          <input class=\"w-full p-2 border border-gray-300\" v-model=\"email\" type=\"text\">\n        </label>\n        <label class=\"block p-4 shadow-md border border-gray-400 mb-4\">\n          Password\n          <input class=\"w-full p-2 border border-gray-300\" v-model=\"password\" type=\"password\">\n        </label>\n        <button type=\"submit\" class=\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\">\n          {{ isSignIn ? 'Sign In' : 'Sign Up'}}\n        </button>\n      </form>\n    </div>\n    <div v-if=\"userEmail\">\n      <p class=\"text-2xl\">{{ userEmail }} is logged in</p>\n      <button class=\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\" type=\"button\" @click=\"signOut\">\n        Sign Out\n      </button>\n      <p>Your household: {{ houseName }}</p>\n      <button class=\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\" type=\"button\" @click=\"createHouse\">\n        Create Household\n      </button>\n      <h2>Invite a user to your household</h2>\n      <label class=\"block p-4 shadow-md border border-gray-400 mb-4\">\n        Email Address\n        <input class=\"w-full p-2 border border-gray-300\" type=\"text\" v-model=\"inviteeEmail\">\n      </label>\n      <button class=\"block p-2 px-8 shadow-lg mb-8 text-xl border-gray-600 border-2\" type=\"button\" @click=\"inviteUser\">\n        Invite User\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as firebase from \"firebase/app\";\n\nimport { mapState } from 'vuex';\nimport { auth, db, usersCollection, householdsCollection } from '../firebase';\n\nexport default {\n  name: \"User\",\n  data: function() {\n    return {\n      isSignIn: true,\n      email: '',\n      password: '',\n      houseName: '',\n      inviteeEmail: '',\n      userEmail: auth.currentUser ?\n        auth.currentUser.email : null\n    }\n  },\n  computed: {\n    ...mapState([\"userProfile\"])\n  },\n  created: function() {\n    if (auth.currentUser) {\n      console.log(auth.currentUser.uid)\n      usersCollection.doc(auth.currentUser.uid).get()\n      .then(doc => {\n        console.log(doc)\n        if (doc.exists) {\n          console.log(doc.data())\n          const household = doc.data().household;\n          console.log(household)\n          db.collection('households').doc(household).get()\n          .then(myHouse => {\n            if (myHouse.exists) {\n              this.houseName = myHouse.data().name;\n              console.log(this.houseName)\n            }\n          })\n        }\n      })\n    }\n  },\n  methods: {\n    signUp() {\n      console.log('signup')\n      auth.createUserWithEmailAndPassword(this.email, this.password)\n      .then(({ user }) => {\n        // this.$router.replace('/login')\n        this.email = '';\n        this.password = '';\n        console.log(user.uid, user.email)\n\n        // const newUser = { email:  }\n        // db.collections('users')\n        //   .doc(this.user.id)\n      }).catch(err => {\n        alert(err.message)\n      });\n    },\n    signIn() {\n      this.$store.dispatch('login', {\n        email: this.email,\n        password: this.password\n      });\n    },\n    signOut() {\n      auth.signOut().then(() => {\n        this.userEmail = null\n      }).catch(err => alert(err.message));\n    },\n    createHouse() {\n      db.collection('households').add(\n        { users: [auth.currentUser.uid] })\n      .then(docRef => {\n        usersCollection.doc(auth.currentUser.uid).set({\n          households: docRef.id\n        }, { merge: true });\n      })\n    },\n    inviteUser() {\n      usersCollection.where('email', '==', this.inviteeEmail)\n        .get()\n        .then(querySnapshot => {\n          querySnapshot.forEach(doc => {\n            const uid = doc.id;\n            usersCollection.doc(uid).update({\n              household: this.userProfile.household\n            })\n            householdsCollection.doc(this.userProfile.household).update({\n              users: firebase.firestore.FieldValue.arrayUnion(uid)\n            }).then(() => {\n              this.inviteeEmail = '';\n            })\n          })\n        })\n        .catch(error => {\n          console.log(error)\n        })\n    }\n  }\n}\n</script>\n\n\n<style lang=\"css\" scoped>\n  .wrapper {\n    box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.5);\n    margin: 0 auto 1rem auto;\n    max-width: 666px;\n    height: calc(100vh - 4rem);\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=9a62c3ea&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=9a62c3ea&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a62c3ea\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=9a62c3ea&lang=css&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=9a62c3ea&lang=css&scoped=true&\""],"sourceRoot":""}